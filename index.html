<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>‡∏Ñ‡∏∏‡∏ì‡∏£‡∏π‡πâ‡∏ó‡∏±‡∏ô‡∏™‡πÇ‡∏ï‡∏£‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á?</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@400;700&display=swap" rel="stylesheet"/>
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
body,button,label,input{font-family:'Noto Sans Thai',sans-serif!important}
body{background:#f0f2f5;display:flex;justify-content:center;padding:40px 0}
.container{width:100%;max-width:480px;padding:0 16px}
h1{text-align:center;font-size:28px;color:#1a237e;margin-bottom:24px}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:24px}
.card{background:#fff;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.05);
  padding:20px;text-align:center;cursor:pointer;min-height:140px;
  display:flex;flex-direction:column;justify-content:center;transition:transform .2s}
.card:hover{transform:translateY(-4px)}
.card .emoji{font-size:36px;margin-bottom:8px}
.card .title{font-size:18px;font-weight:700;color:#333}
#quiz-card,#result-card,#learn-card,#asm-guide{display:none}
#progress{position:relative;height:8px;background:#e0e0e0;border-radius:4px;margin-bottom:16px}
#progress-bar{height:100%;width:0;background:#1e88e5;transition:width .3s}
#qindex{position:absolute;top:4px;left:50%;transform:translateX(-50%);font-size:14px;font-weight:700;color:#333}
.question{font-size:28px;font-weight:700;color:#1a237e;margin:24px 0}
.choices label{display:block;font-size:22px;padding:12px;background:#f7f7f7;
  border-radius:6px;margin-bottom:12px;cursor:pointer;transition:background .2s;text-align:left}
.choices label:hover{background:#ececec}
.choices input{margin-right:12px;transform:scale(1.2)}
#submitBtn{display:none;width:100%;padding:12px;margin-top:16px;
  background:#5e35b1;color:#fff;border:none;border-radius:6px;font-size:18px;
  font-weight:700;cursor:pointer;transition:background .2s}
#submitBtn:hover{background:#512da8}
.link-note{font-size:14px;color:#666;margin-top:12px;text-align:left}
.link-note span{color:#1e88e5;cursor:pointer}
.modal{position:fixed;top:0;left:0;right:0;bottom:0;
  background:rgba(0,0,0,0.4);display:flex;justify-content:center;
  align-items:center;z-index:1000}
.modal-content{background:#fff;padding:24px;border-radius:6px;
  max-width:360px;width:90%;text-align:center}
.modal-content p{font-size:22px;margin-bottom:16px}
.modal-content button{padding:10px 24px;font-size:18px;font-weight:700;
  color:#fff;background:#1e88e5;border:none;border-radius:6px;cursor:pointer;transition:.2s}
.modal-content button:hover{background:#1565c0}
.accordion{margin:16px 0}
.accordion-item:not(:last-child){border-bottom:1px solid #ddd}
.accordion-header{padding:12px;font-size:18px;font-weight:700;cursor:pointer;
  background:#e3f2fd;display:flex;justify-content:space-between;align-items:center}
.accordion-body{padding:12px;font-size:16px;line-height:1.6;display:none}
.accordion-header.active{background:#bbdefb}
.accordion-header .icon{font-size:20px}
#shareBtn{display:none;width:100%;padding:12px;margin-top:16px;
  background:linear-gradient(45deg,#fb8c00,#ffb74d);color:#fff;border:none;
  border-radius:6px;font-size:18px;font-weight:700;cursor:pointer;transition:.2s}
#shareBtn:hover{background:linear-gradient(45deg,#f57c00,#ffa726)}
.asm-quiz-btn{display:none;padding:12px;width:100%;font-size:18px;
  font-weight:700;color:#fff;background:#795548;border:none;border-radius:6px;
  cursor:pointer;transition:.2s;margin-top:12px}
.asm-quiz-btn:hover{background:#5d4037}
.card.active { /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏Å‡∏≤‡∏£‡πÑ‡∏Æ‡πÑ‡∏•‡∏ï‡πå‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å */
  border: 2px solid #1e88e5;
  box-shadow: 0 4px 12px rgba(30, 136, 229, 0.3);
  background: #e8f0fe;
}

</style>
</head>
<body>
<div class="container">
  <h1>‡∏Ñ‡∏∏‡∏ì‡∏£‡∏π‡πâ‡∏ó‡∏±‡∏ô‡∏™‡πÇ‡∏ï‡∏£‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á?</h1>
  <!-- 4 Cards Grid -->
  <div class="grid">
    <div id="cardGeneralQuiz" class="card">
      <div class="emoji">‚ùì</div>
      <div class="title">‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</div>
    </div>
    <div id="cardGeneralLearn" class="card">
      <div class="emoji">üìñ</div>
      <div class="title">‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡πÇ‡∏ï‡∏£‡∏Å</div>
    </div>
    <div id="cardAsmQuiz" class="card">
      <div class="emoji">ü©∫</div>
      <div class="title">‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ ‡∏≠‡∏™‡∏°.‡∏™‡πÇ‡∏ï‡∏£‡∏Å</div>
    </div>
    <div id="cardAsmGuide" class="card">
      <div class="emoji">üìã</div>
      <div class="title">‡πÅ‡∏ô‡∏ß‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥ ‡∏≠‡∏™‡∏°.‡∏™‡πÇ‡∏ï‡∏£‡∏Å</div>
    </div>
  </div>

  <!-- Quiz Card -->
  <div id="quiz-card" class="card" style="min-height:500px">
    <div id="progress"><span id="qindex">1/10</span><div id="progress-bar"></div></div>
    <div id="questionText" class="question"></div>
    <div id="choicesContainer" class="choices"></div>
    <button id="submitBtn">‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
    <div class="link-note">‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÅ‡∏ô‡πà‡πÉ‡∏à ‡∏Å‡∏î‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà¬†<span id="openLearn">üìñ</span></div>
  </div>

  <!-- Result Card -->
  <div id="result-card" class="card" style="min-height:500px">
    <h2>‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•</h2>
    <div id="resultMessage" style="font-size:18px;line-height:1.6"></div>
    <button id="shareBtn">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡πÅ‡∏•‡∏∞‡πÅ‡∏ä‡∏£‡πå‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</button>
  </div>
</div>

<!-- General Knowledge Modal -->
<div id="learn-card" class="modal">
  <div class="modal-content" style="max-height:80vh;overflow:auto;text-align:left">
    <h2>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡πÇ‡∏ï‡∏£‡∏Å</h2>
    <div class="accordion">
      <div class="accordion-item">
        <div class="accordion-header">1. ‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å ‚Äú‡∏™‡πÇ‡∏ï‡∏£‡∏Å‚Äù ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à<span class="icon">Ôºã</span></div>
        <div class="accordion-body">
          <p>‡∏™‡πÇ‡∏ï‡∏£‡∏Å ‡∏´‡∏£‡∏∑‡∏≠‡πÇ‡∏£‡∏Ñ‡∏´‡∏•‡∏≠‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏™‡∏°‡∏≠‡∏á ‡∏Ñ‡∏∑‡∏≠‡∏†‡∏≤‡∏ß‡∏∞‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÑ‡∏õ‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏™‡∏°‡∏≠‡∏á‡πÑ‡∏î‡πâ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠
          ‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡∏´‡∏•‡∏≠‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏ï‡∏µ‡∏ö‡∏ï‡∏±‡∏ô (Ischemic) ‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏ï‡∏Å/‡∏£‡∏±‡πà‡∏ß (Hemorrhagic) ‡∏™‡πà‡∏á‡∏ú‡∏•‡πÉ‡∏´‡πâ‡πÄ‡∏ã‡∏•‡∏•‡πå‡∏™‡∏°‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢
          ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡πÑ‡∏°‡πà‡∏Å‡∏µ‡πà‡∏ô‡∏≤‡∏ó‡∏µ ‡∏≠‡∏≤‡∏à‡πÄ‡∏Å‡∏¥‡∏î‡∏≠‡∏±‡∏°‡∏û‡∏§‡∏Å‡∏©‡πå ‡∏≠‡∏±‡∏°‡∏û‡∏≤‡∏ï ‡∏û‡∏π‡∏î‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏™‡∏µ‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï</p>
        </div>
      </div>
      <div class="accordion-item">
        <div class="accordion-header">2. ‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô<span class="icon">Ôºã</span></div>
        <div class="accordion-body">
          <p><strong>‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ:</strong></p>
          <ul style="padding-left:1em">
            <li>‡∏≠‡∏≤‡∏¢‡∏∏‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô</li>
            <li>‡πÄ‡∏û‡∏®‡∏ä‡∏≤‡∏¢‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢</li>
            <li>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πÇ‡∏ï‡∏£‡∏Å</li>
          </ul>
          <p><strong>‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏î‡πâ:</strong></p>
          <ul style="padding-left:1em">
            <li>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô‡∏™‡∏π‡∏á: ‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÉ‡∏´‡πâ‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤¬†140/90¬†mmHg</li>
            <li>‡πÄ‡∏ö‡∏≤‡∏´‡∏ß‡∏≤‡∏ô: ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á 70‚Äì130¬†mg/dL</li>
            <li>‡πÑ‡∏Ç‡∏°‡∏±‡∏ô‡∏™‡∏π‡∏á: ‡∏•‡∏î‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏°‡∏±‡∏ô ‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≠‡πÄ‡∏•‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡∏≠‡∏•</li>
            <li>‡∏™‡∏π‡∏ö‡∏ö‡∏∏‡∏´‡∏£‡∏µ‡πà: ‡πÄ‡∏•‡∏¥‡∏Å‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏∏‡∏î‡∏ï‡∏±‡∏ô</li>
            <li>‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‚Äì‡∏≠‡πâ‡∏ß‡∏ô‡∏•‡∏á‡∏û‡∏∏‡∏á</li>
            <li>‡∏Ç‡∏≤‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢: ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥¬†150¬†‡∏ô‡∏≤‡∏ó‡∏µ/‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</li>
          </ul>
        </div>
      </div>
      <div class="accordion-item">
        <div class="accordion-header">3. ‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏î‡πâ‡∏ß‡∏¢ BEFAST ‡πÅ‡∏•‡∏∞‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏ó‡∏±‡∏ô‡∏ó‡∏µ<span class="icon">Ôºã</span></div>
        <div class="accordion-body">
          <ul style="padding-left:1em">
            <li><strong>B</strong> (Balance): ‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏£‡∏á‡∏ï‡∏±‡∏ß‡∏•‡∏≥‡∏ö‡∏≤‡∏Å</li>
            <li><strong>E</strong> (Eyes): ‡∏ï‡∏≤‡∏°‡∏±‡∏ß‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</li>
            <li><strong>F</strong> (Face): ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ß</li>
            <li><strong>A</strong> (Arm): ‡πÅ‡∏Ç‡∏ô‡∏≠‡πà‡∏≠‡∏ô‡πÅ‡∏£‡∏á</li>
            <li><strong>S</strong> (Speech): ‡∏û‡∏π‡∏î‡πÑ‡∏°‡πà‡∏ä‡∏±‡∏î</li>
            <li><strong>T</strong> (Time): ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏¥‡πà‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç ‡πÇ‡∏ó‡∏£¬†1669¬†‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</li>
          </ul>
        </div>
      </div>
      <div class="accordion-item">
        <div class="accordion-header">4. ‡∏î‡∏π‡πÅ‡∏•‡∏´‡∏•‡∏±‡∏á‡∏™‡πÇ‡∏ï‡∏£‡∏Å‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ü‡∏∑‡πâ‡∏ô‡∏ü‡∏π<span class="icon">Ôºã</span></div>
        <div class="accordion-body">
          <p>‡∏´‡∏•‡∏±‡∏á‡∏™‡πÇ‡∏ï‡∏£‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏¢‡∏†‡∏≤‡∏û‡∏ö‡∏≥‡∏ö‡∏±‡∏î ‡∏ù‡∏∂‡∏Å‡∏û‡∏π‡∏î ‡∏ù‡∏∂‡∏Å‡∏Å‡∏•‡∏∑‡∏ô ‡πÅ‡∏•‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û
          ‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô ‡πÄ‡∏ö‡∏≤‡∏´‡∏ß‡∏≤‡∏ô ‡πÑ‡∏Ç‡∏°‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥ ‡∏†‡∏≤‡∏¢‡πÉ‡∏ï‡πâ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÅ‡∏û‡∏ó‡∏¢‡πå</p>
        </div>
      </div>
      <div class="accordion-item">
        <div class="accordion-header">5. ‡∏¢‡∏≤‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡∏•‡∏¥‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏´‡∏ô‡πâ‡∏≤<span class="icon">Ôºã</span></div>
        <div class="accordion-body">
          <p>rT‚ÄêPA ‡πÄ‡∏õ‡πá‡∏ô‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô¬†4.5¬†‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡πÅ‡∏£‡∏Å‡∏´‡∏•‡∏±‡∏á‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô ‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏•‡∏≠‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏î
          ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏™‡∏°‡∏≠‡∏á‡∏ñ‡∏π‡∏Å‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡∏¢‡∏≤‡∏ß‡∏ô‡∏≤‡∏ô</p>
        </div>
      </div>
      <div class="accordion-item">
        <div class="accordion-header">6. ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡πÅ‡∏≠‡∏õ‡∏™‡∏ß‡∏µ‡∏£‡∏π‡πâ‡∏ó‡∏±‡∏ô‡∏™‡πÇ‡∏ï‡∏£‡∏Å<span class="icon">Ôºã</span></div>
        <div class="accordion-body">
          <ol style="padding-left:1em">
            <li>‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏≠‡∏õ ‚Äú‡∏™‡∏ß‡∏µ‡∏£‡∏π‡πâ‡∏ó‡∏±‡∏ô‡∏™‡πÇ‡∏ï‡∏£‡∏Å‚Äù (LIFF)</li>
            <li>‡∏™‡πÅ‡∏Å‡∏ô QR¬†‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° LIFF</li>
            <li>‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏ú‡πà‡∏≤‡∏ô LINE</li>
            <li>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‚Äú‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ‚Äù ‡∏´‡∏£‡∏∑‡∏≠ ‚Äú‡∏≠‡∏™‡∏°.‡∏™‡πÇ‡∏ï‡∏£‡∏Å‚Äù</li>
            <li>‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö ‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏±‡∏ö‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</li>
            <li>‡πÅ‡∏ä‡∏£‡πå‡∏ú‡∏•‡∏ú‡πà‡∏≤‡∏ô Flex message ‡∏´‡∏£‡∏∑‡∏≠‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</li>
          </ol>
        </div>
      </div>
    </div>
    <button id="closeLearn" class="btn" style="background:#f44336">‡∏õ‡∏¥‡∏î</button>
  </div>
</div>

<!-- ASM Guide Modal -->
<div id="asm-guide" class="modal">
  <div class="modal-content" style="max-height:80vh;overflow:auto;text-align:left">
    <h2>‡πÅ‡∏ô‡∏ß‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥ ‡∏≠‡∏™‡∏°.‡∏™‡πÇ‡∏ï‡∏£‡∏Å</h2>
    <div class="accordion">
      <div class="accordion-item">
        <div class="accordion-header">1. ‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å‡πÇ‡∏£‡∏Ñ‡∏´‡∏•‡∏≠‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏™‡∏°‡∏≠‡∏á<span class="icon">Ôºã</span></div>
        <div class="accordion-body">
          <p>‡∏™‡πÇ‡∏ï‡∏£‡∏Å‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡∏´‡∏•‡∏≠‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏ï‡∏µ‡∏ö‡∏ï‡∏±‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏ï‡∏Å ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡πÑ‡∏õ‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏™‡∏°‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠
          ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÄ‡∏£‡πá‡∏ß‡∏†‡∏≤‡∏¢‡πÉ‡∏ô¬†4.5¬†‡∏ä‡∏°. ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏û‡∏¥‡∏Å‡∏≤‡∏£</p>
        </div>
      </div>
      <div class="accordion-item">
        <div class="accordion-header">2. ‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô<span class="icon">Ôºã</span></div>
        <div class="accordion-body">
          <ul style="padding-left:1em">
            <li>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô‡∏™‡∏π‡∏á ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°¬†<140/90¬†mmHg</li>
            <li>‡πÄ‡∏ö‡∏≤‡∏´‡∏ß‡∏≤‡∏ô ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏• 70‚Äì130¬†mg/dL</li>
            <li>‡πÑ‡∏Ç‡∏°‡∏±‡∏ô‡∏™‡∏π‡∏á ‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏°‡∏±‡∏ô</li>
            <li>‡∏™‡∏π‡∏ö‡∏ö‡∏∏‡∏´‡∏£‡∏µ‡πà ‡πÄ‡∏•‡∏¥‡∏Å‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</li>
            <li>‡∏≠‡πâ‡∏ß‡∏ô‡∏•‡∏á‡∏û‡∏∏‡∏á ‡∏ß‡∏±‡∏î‡∏£‡∏≠‡∏ö‡πÄ‡∏≠‡∏ß‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå</li>
          </ul>
        </div>
      </div>
      <div class="accordion-item">
        <div class="accordion-header">3. ‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏î‡πâ‡∏ß‡∏¢ BEFAST<span class="icon">Ôºã</span></div>
        <div class="accordion-body">
          <ul style="padding-left:1em">
            <li>B: ‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏£‡∏á‡∏ï‡∏±‡∏ß‡∏•‡∏≥‡∏ö‡∏≤‡∏Å</li>
            <li>E: ‡∏ï‡∏≤‡∏°‡∏±‡∏ß‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</li>
            <li>F: ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ß</li>
            <li>A: ‡πÅ‡∏Ç‡∏ô‡∏≠‡πà‡∏≠‡∏ô‡πÅ‡∏£‡∏á</li>
            <li>S: ‡∏û‡∏π‡∏î‡πÑ‡∏°‡πà‡∏ä‡∏±‡∏î</li>
            <li>T: ‡πÇ‡∏ó‡∏£¬†1669¬†‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</li>
          </ul>
        </div>
      </div>
      <div class="accordion-item">
        <div class="accordion-header">4. ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ß‡∏±‡∏î‡∏Ñ‡πà‡∏≤‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô<span class="icon">Ôºã</span></div>
        <div class="accordion-body">
          <ul style="padding-left:1em">
            <li>‡∏ß‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô‡πÇ‡∏•‡∏´‡∏¥‡∏ï 2 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏≠‡∏≤‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢</li>
            <li>‡∏ß‡∏±‡∏î‡∏£‡∏≠‡∏ö‡πÄ‡∏≠‡∏ß ‡∏ú‡πà‡∏≤‡∏ô‡∏™‡∏∞‡∏î‡∏∑‡∏≠ ‡∏Ç‡∏ì‡∏∞‡∏ú‡πà‡∏≠‡∏ô‡∏´‡∏≤‡∏¢‡πÉ‡∏à</li>
            <li>‡∏ï‡∏£‡∏ß‡∏à‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡πÅ‡∏•‡∏∞‡πÑ‡∏Ç‡∏°‡∏±‡∏ô‡πÉ‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏î</li>
          </ul>
        </div>
      </div>
      <div class="accordion-item">
        <div class="accordion-header">5. ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏î‡πâ‡∏ß‡∏¢ ‚Äú‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏™‡∏µ‚Äù ‡πÅ‡∏•‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏ú‡∏•<span class="icon">Ôºã</span></div>
        <div class="accordion-body">
          <p>‡πÅ‡∏ö‡πà‡∏á‡∏™‡∏µ‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á 10 ‡∏õ‡∏µ¬†: ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß¬†<10%, ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á¬†10‚Äì<20%, ‡∏™‡πâ‡∏°¬†20‚Äì<30%, ‡πÅ‡∏î‡∏á¬†‚â•30%</p>
        </div>
      </div>
      <div class="accordion-item">
        <div class="accordion-header">6. ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡πÅ‡∏≠‡∏õ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ‡∏≠‡∏™‡∏°.<span class="icon">Ôºã</span></div>
        <div class="accordion-body">
          <ol style="padding-left:1em">
            <li>‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏≠‡∏õ LIFF¬†‚Äú‡∏™‡∏ß‡∏µ‡∏£‡∏π‡πâ‡∏ó‡∏±‡∏ô‡∏™‡πÇ‡∏ï‡∏£‡∏Å‚Äù</li>
            <li>‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô LINE</li>
            <li>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‚Äú‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö ‡∏≠‡∏™‡∏°.‡∏™‡πÇ‡∏ï‡∏£‡∏Å‚Äù</li>
            <li>‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö 20¬†‡∏Ç‡πâ‡∏≠</li>
            <li>‡∏£‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ‡πÅ‡∏•‡∏∞‡πÅ‡∏ä‡∏£‡πå‡∏ú‡∏•</li>
            <li>‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πå‡∏î ‚Äú‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‚Äù</li>
          </ol>
        </div>
      </div>
    </div>
    <button id="closeAsm" class="btn" style="background:#f44336">‡∏õ‡∏¥‡∏î</button>
  </div>
</div>
<div id="answerModal" class="modal" style="display: none;">
  <div class="modal-content">
    <p id="modalMessage"></p>
    <button id="modalNextBtn">‡∏Ç‡πâ‡∏≠‡∏ï‡πà‡∏≠‡πÑ‡∏õ</button>
  </div>
</div>
<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
<script>
const GAS_URL='https://script.google.com/macros/s/.../exec',LIFF_ID='2005789397-ROQvjpYk';
let userProfile,questions=[],idx=0,score=0,wrongs=[],cachedRank,cachedTotal;
// SHUFFLE
const shuffle=a=>{for(let i=a.length-1;i>0;i--){let j=Math.random()*(i+1)|0;[a[i],a[j]]=[a[j],a[i]];}return a;};

// HISTORY
function loadHistory(){
  let s=document.createElement('script');
  s.src=`${GAS_URL}?action=getHistory&userId=${encodeURIComponent(userProfile.userId)}&level=general&callback=handleHistory`;
  document.head.appendChild(s);
}
window.handleHistory=data=>{
  let txt=document.getElementById('start-text');
  if(data&&data.length){
    window._last=data.pop();
    let s2=document.createElement('script');
    s2.src=`${GAS_URL}?action=getUserName&userId=${encodeURIComponent(userProfile.userId)}&callback=handleUserName`;
    document.head.appendChild(s2);
  }else txt.innerHTML=`<span class="highlight">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö</span><br/>‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢`;
};
window.handleUserName=resp=>{
  let nm=resp.name||userProfile.displayName;
  let txt=document.getElementById('start-text');
  let{score:ls,full_score:lf}=window._last;
  txt.innerHTML=ls<lf
    ?`<span class="highlight">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡∏Ñ‡∏∏‡∏ì ${nm}</span><br/>‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏ó‡∏≥‡πÑ‡∏î‡πâ ${ls}/${lf}`
    :`<span class="highlight">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏∏‡∏ì ${nm}!</span><br/>‡∏ó‡∏≥‡πÄ‡∏ï‡πá‡∏° ${lf} ‡πÅ‡∏•‡πâ‡∏ß`;
};

// CARD CLICKS
document.getElementById('cardGeneralQuiz').onclick=_=>{
  let s=document.createElement('script');
  s.src=`${GAS_URL}?action=getQuiz&level=general&callback=handleQuiz`;
  document.head.appendChild(s);
  
};
document.getElementById('cardGeneralLearn').onclick=_=>{
  document.getElementById('learn-card').style.display='flex';
};
document.getElementById('cardAsmQuiz').onclick=_=>{
  let s=document.createElement('script');
  s.src=`${GAS_URL}?action=getQuiz&level=asm&callback=handleQuiz`;
  document.head.appendChild(s);
};
document.getElementById('cardAsmGuide').onclick=_=>{
  document.getElementById('asm-guide').style.display='flex';
};
// ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏® click‚Äêhandlers ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞ card ‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏Ñ‡πâ‡∏î‡∏ô‡∏µ‡πâ
const gridCards = document.querySelectorAll('.grid .card');
gridCards.forEach(card => {
  card.addEventListener('click', () => {
    // ‡∏•‡∏ö active ‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏Å‡πÉ‡∏ö
    gridCards.forEach(c => c.classList.remove('active'));
    // ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏û‡∏¥‡πà‡∏° active ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÉ‡∏ö‡∏ô‡∏µ‡πâ
    card.classList.add('active');
  });
});


// QUIZ CALLBACK
window.handleQuiz=data=>{
  questions=data;idx=0;score=0;wrongs=[];
  document.getElementById('quiz-card').style.display='block';
  showQuestion();
};
function showQuestion(){
  let q=questions[idx];
  document.getElementById('qindex').textContent=`${idx+1}/${questions.length}`;
  document.getElementById('progress-bar').style.width=`${(idx+1)/questions.length*100}%`;
  document.getElementById('questionText').textContent=q.question;
  let ct=document.getElementById('choicesContainer');ct.innerHTML='';
  shuffle(['choice1','choice2','choice3','choice4']).forEach(k=>{
    let lbl=document.createElement('label');
    lbl.textContent=q[k];
    lbl.onclick=_=>{
      document.getElementById('submitBtn').style.display='block';
      document.querySelectorAll('.choices label').forEach(l=>l.classList.remove('selected'));
      lbl.classList.add('selected');
    };
    let inp=document.createElement('input');
    inp.type='radio';inp.name='choice';inp.value=lbl.textContent;
    lbl.prepend(inp);ct.appendChild(lbl);
  });
  let sb=document.getElementById('submitBtn');sb.style.display='none';
  sb.onclick=_=>checkAnswer(q);
}
function checkAnswer(q){
  let sel=document.querySelector('input[name="choice"]:checked');
  if(!sel)return;
  let ch=sel.value.trim(),co=q.correct_choice.trim();
  let m=document.getElementById('modalMessage');
  if(ch===co){score++;m.textContent='‚úÖ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!'}else{wrongs.push(q.test_id);m.textContent=`üòû ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏∑‡∏≠¬†${co}`;}
  document.getElementById('answerModal').style.display='flex';
  document.getElementById('modalNextBtn').onclick=_=>{
    document.getElementById('answerModal').style.display='none';
    idx<questions.length-1?showQuestionAt(idx+1):finishQuiz();
  };
}
function showQuestionAt(i){idx=i;document.getElementById('submitBtn').style.display='none';showQuestion();}
function finishQuiz(){
  document.getElementById('quiz-card').style.display='none';
  document.getElementById('result-card').style.display='block';
  let msgLines;
  if(score<=4)msgLines=['‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏£‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å‡∏™‡πÇ‡∏ï‡∏£‡∏Å','‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô','‡πÅ‡∏•‡πâ‡∏ß‡∏°‡∏≤‡∏™‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà'];
  else if(score<=8)msgLines=['‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏ö‡∏≤‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á','‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡πÅ‡∏•‡πâ‡∏ß‡∏°‡∏≤‡∏™‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà','‡πÉ‡∏´‡πâ‡πÄ‡∏ï‡πá‡∏° 10 ‡∏Å‡∏±‡∏ô‡πÄ‡∏ñ‡∏≠‡∏∞'];
  else msgLines=['‡∏™‡∏∏‡∏î‡∏¢‡∏≠‡∏î ‡∏£‡∏π‡πâ‡∏ó‡∏±‡∏ô‡∏™‡πÇ‡∏ï‡∏£‡∏Å‡πÅ‡∏•‡πâ‡∏ß','‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡∏ö‡∏≠‡∏Å‡∏Ñ‡∏ô‡∏£‡∏≠‡∏ö‡∏Ç‡πâ‡∏≤‡∏á','‡∏°‡∏≤‡πÅ‡∏ä‡∏£‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏Å‡∏±‡∏ô!'];
  document.getElementById('resultMessage').innerHTML=
    `<strong>‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ¬†${score}/${questions.length}¬†‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</strong><br/>`+msgLines.join('<br/>');
  let p=[
    'action=recordResult',
    `userId=${encodeURIComponent(userProfile.userId)}`,
    `level=${questions.length===20?'asm':'general'}`,
    `score=${score}`,
    `full_score=${questions.length}`,
    'posttest=true',
    `wrong=${encodeURIComponent(wrongs.join(','))}`,
    'callback=cacheRank'
  ];
  let s=document.createElement('script');
  s.src=`${GAS_URL}?${p.join('&')}`;
  document.head.appendChild(s);
}
window.cacheRank=resp=>{
  if(resp.status==='success'){
    cachedRank=resp.rank;cachedTotal=resp.totalPlayers;
    document.getElementById('shareBtn').style.display='block';
  }
};

// SHARE FLEX
document.getElementById('shareBtn').onclick=_=>window.handleShareRecord({status:'success'});
window.handleShareRecord=resp=>{
  if(resp.status!=='success')return;
  let name=userProfile.displayName,pic=userProfile.pictureUrl;
  let flex={
    type:'flex',altText:`${name} ‡∏£‡∏π‡πâ‡∏ó‡∏±‡∏ô‡∏™‡πÇ‡∏ï‡∏£‡∏Å`,
    contents:{
      type:'bubble',size:'kilo',
      header:{type:'box',layout:'vertical',backgroundColor:'#FFF9C4',contents:[
        {type:'text',text:`${name} ‡∏£‡∏π‡πâ‡∏ó‡∏±‡∏ô‡∏™‡πÇ‡∏ï‡∏£‡∏Å`,align:'center',weight:'bold',size:'lg'},
        {type:'text',text:'‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å‡πÅ‡∏•‡∏∞‡∏°‡∏≤‡∏ó‡∏±‡∏ô ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏≠‡∏±‡∏°‡∏û‡∏≤‡∏ï',align:'center',color:'#FF9800',size:'sm'}
      ]},
      body:{type:'box',layout:'vertical',backgroundColor:'#FFF9C4',spacing:'sm',paddingAll:'0px',contents:[
        {type:'text',text:'üëë',align:'center',size:'4xl',margin:'md'},
        {type:'image',url:pic,aspectMode:'cover',aspectRatio:'1:1',size:'full',gravity:'center',
         cornerRadius:'999px',borderWidth:'4px',borderColor:'#FFFFFF'},
        {type:'text',text:`‡∏£‡∏π‡πâ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡πÇ‡∏ï‡∏£‡∏Å¬†${score}/${questions.length}`,align:'center',size:'md',weight:'bold',margin:'md'},
        {type:'text',text:`‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà¬†${cachedRank}¬†‡∏à‡∏≤‡∏Å¬†${cachedTotal}`,align:'center',size:'sm',margin:'xs'},
        {type:'text',text:'‡∏Ñ‡∏∏‡∏ì‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å‡∏™‡πÇ‡∏ï‡∏£‡∏Å‡∏î‡∏µ‡πÅ‡∏Ñ‡πà‡πÑ‡∏´‡∏ô ‡∏•‡∏≠‡∏á‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏•‡∏¢',align:'center',color:'#D32F2F',size:'sm',margin:'md'}
      ]},
      footer:{type:'box',layout:'horizontal',backgroundColor:'#FFF9C4',spacing:'none',paddingAll:'0px',contents:[
        {type:'button',style:'primary',color:'#FBC02D',action:{type:'uri',label:'‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö',uri:`https://liff.line.me/${LIFF_ID}`}},
        {type:'button',style:'secondary',color:'#FFFFFF',action:{type:'uri',label:'‡∏™‡∏ß‡∏µ‡∏£‡∏π‡πâ‡∏ó‡∏±‡∏ô‡∏™‡πÇ‡∏ï‡∏£‡∏Å',uri:'https://lin.ee/mQhHzLv'}}
      ]}
    }
  };
  if(liff.isInClient()&&liff.isApiAvailable('shareTargetPicker'))
    liff.shareTargetPicker([flex]).catch(e=>console.error(e));
  else if(liff.isApiAvailable('sendMessages'))
    liff.sendMessages([flex]).catch(e=>console.error(e));
  else alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏ä‡∏£‡πå‡πÑ‡∏î‡πâ ‡πÇ‡∏õ‡∏£‡∏î‡∏•‡∏≠‡∏á‡πÉ‡∏ô LINE app');
};

// Accordion logic
document.querySelectorAll('.accordion-header').forEach(h=>{
  h.onclick=_=>{
    let open=h.classList.toggle('active');
    h.nextElementSibling.style.display=open?'block':'none';
    h.querySelector('.icon').textContent=open?'‚àí':'Ôºã';
  };
});

// ASM GUIDE CLOSE
document.getElementById('closeLearn').onclick=_=>document.getElementById('learn-card').style.display='none';
document.getElementById('closeAsm').onclick=_=>document.getElementById('asm-guide').style.display='none';

// LIFF init
document.addEventListener('DOMContentLoaded',async()=>{
  await liff.init({liffId:LIFF_ID});
  if(!liff.isLoggedIn())await liff.login();
  userProfile=await liff.getProfile();
  loadHistory();
});
</script>

</body>
</html>
